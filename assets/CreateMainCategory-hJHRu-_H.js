import{d as F,r as h,N as C,aA as H,aB as L,aC as m,aE as q,aF as b,aG as z,c as S,f as i,j as n,h as s,aH as x,aI as V,k as M,V as w,aJ as A,o as B,g as T,t as D,b as G,e as Q,F as U,G as J,H as K}from"./index-sE9P4Q9O.js";import{a as O}from"./mainCategories-service-w-lFL1KI.js";import{_ as P}from"./ImageUpload.vue_vue_type_script_setup_true_lang-QyoQWSnT.js";import{p as R}from"./pathToFile-cjpw7gPR.js";import"./queryString-AL1HqB06.js";import"./formData-AERYmAuJ.js";import"./DeleteIcon.vue_vue_type_script_setup_true_lang-1ZPx5IJG.js";const W={class:"grid md:grid-cols-2 xl:grid-cols-3 gap-x-8 gap-y-2 mt-7"},X=i("h3",{class:"text-xl"}," قم بالضغط لرفع صورة ",-1),Y={class:"mt-8 w-1/4"},Z={class:"mt-6"},ee=F({__name:"MainCategoryFrom",props:{isLoading:{type:Boolean},mainCategory:{}},emits:["submit"],setup(y,{emit:d}){const e=y,u=d,a=h(null),l=h("empty"),c=C(()=>!!e.mainCategory),I=C(()=>!$.value.valid||l.value=="empty"),E=H(L({name:c.value?m():m().min(1,"يجب إدخال إسم التصنيف "),description:c.value?m():m().min(1,"يجب إدخال التفاصيل  ")})),{handleSubmit:N,errors:_,meta:$,setValues:j}=q({validationSchema:E}),{value:p}=b("name"),{value:g}=b("description");z(()=>{e.mainCategory&&(j({name:e.mainCategory.name,description:e.mainCategory.description}),l.value=e.mainCategory.image_path?"filled":"empty",R(e.mainCategory.image_path,e.mainCategory.image_path.substring(e.mainCategory.image_path.lastIndexOf("/")+1)).then(t=>{a.value=t}).catch(t=>{console.error(t)}))});const v=N(t=>{u("submit",{...t,image_path:a.value})}),k=(t,o)=>{a.value=t,l.value=o};return(t,o)=>{var f;return B(),S("form",{onSubmit:o[2]||(o[2]=A((...r)=>s(v)&&s(v)(...r),["prevent"]))},[i("div",W,[n(V,{modelValue:s(p),"onUpdate:modelValue":o[0]||(o[0]=r=>x(p)?p.value=r:null),label:"إسم التصنيف",variant:"outlined",color:"primary",placeholder:"إسم التصنيف","error-messages":s(_).name},null,8,["modelValue","error-messages"]),n(V,{modelValue:s(g),"onUpdate:modelValue":o[1]||(o[1]=r=>x(g)?g.value=r:null),label:"التفاصيل",type:"text",variant:"outlined",color:"primary",placeholder:"التفاصيل","error-messages":s(_).description},null,8,["modelValue","error-messages"])]),i("div",null,[X,i("div",Y,[n(P,{"image-path":(f=e.mainCategory)==null?void 0:f.image_path,onHandleImage:k},null,8,["image-path"])])]),i("div",Z,[n(w,{disabled:I.value,size:"large",variant:"elevated",color:"primary",type:"submit",loading:e.isLoading},{default:M(()=>[T(D(c.value?"تعديل":"إضافة"),1)]),_:1},8,["disabled","loading"])])],32)}}}),ae={class:"flex justify-between"},te=i("h1",{class:"text-2xl font-medium"}," إضافة تصنيف أساسي جديد ",-1),de=F({__name:"CreateMainCategory",setup(y){const d=G(),e=Q({mutationFn:O,onSuccess:()=>{K.replace({name:"categories"}),d.invalidateQueries({queryKey:["main-categories"]})},onError:a=>{console.log(a)}}),u=a=>{e.mutate(a)};return(a,l)=>(B(),S(U,null,[i("div",ae,[te,n(w,{to:{name:"categories"},variant:"outlined",color:"primary",size:"large","append-icon":s(J)},{default:M(()=>[T(" الرجوع الى التصنيفات الأساسية ")]),_:1},8,["append-icon"])]),n(ee,{"is-loading":s(e).isPending.value,onSubmit:u},null,8,["is-loading"])],64))}});export{de as default};
