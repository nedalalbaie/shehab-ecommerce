import{d as N,c as I}from"./orders-service-DZtj4z2A.js";import{S as u,c as S}from"./check-status-1CD4zFK3.js";import{d as D,I as B,u as E,b as O,e as F,c as i,j as o,k as r,h as s,V as m,f as t,g as _,t as d,i as p,l as b,F as T,m as q,a as L,o as n,aU as j,aP as A,x as P,B as $,C as Q,A as M,H as R}from"./index-sE9P4Q9O.js";import{_ as z}from"./DeleteIcon.vue_vue_type_script_setup_true_lang-1ZPx5IJG.js";import{V as G}from"./ViewIcon-cZLHY9MM.js";import{L as H}from"./LoadingOrders-rB5XNYPP.js";import{_ as K}from"./EmptyData.vue_vue_type_script_setup_true_lang-h7VAi8C4.js";import{V as U}from"./VSpacer-1dX4bruf.js";import{V as J}from"./VDialog-1Ku-f6d7.js";import"./queryString-AL1HqB06.js";const W={class:"flex items-center justify-between mt-6"},X={class:"text-3xl font-medium"},Y={key:0,class:"bg-gray-200 px-2 rounded-lg text-2xl"},Z=L('<div class="flex gap-4"><button class="bg-sky-200 py-1 px-2 rounded-md"> قيد المعالجة </button><button class="bg-sky-200 py-1 px-2 rounded-md"> قيد التوصيل </button><button class="bg-sky-200 py-1 px-2 rounded-md"> تم التوصيل </button><button class="bg-sky-200 py-1 px-2 rounded-md"> ملغية </button></div>',1),tt={key:0},et={key:1,class:"mt-6 flex-grow flex flex-col justify-center"},st={class:"grid grid-cols-productsCards gap-x-4 gap-y-8 mt-6"},ot={class:"text-xl text-center"},at={class:"mt-4 flex items-center border-b border-gray-700 pb-1"},rt=t("p",{class:"w-1/2"}," الحالة ",-1),nt={class:"mt-4 flex items-center border-b border-gray-700"},ct=t("p",{class:"w-1/2"}," التاريخ ",-1),dt={class:"w-1/2 text-center"},it={class:"mt-4 flex items-center border-b border-gray-700"},lt=t("p",{class:"w-1/2"}," عدد العناصر ",-1),ut={class:"w-1/2 text-center"},mt={class:"mt-4 flex items-center border-b border-gray-700"},_t=t("p",{class:"w-1/2"}," العنوان ",-1),pt={class:"w-1/2 text-center"},ft=t("div",{class:"mt-4 flex items-center border-b border-gray-700"},[t("p",{class:"w-1/2"}," رقم الهاتف "),t("p",{class:"w-1/2 text-center"}," 0925448193 ")],-1),xt={class:"mt-4 flex items-center border-b border-gray-700"},bt=t("p",{class:"w-1/2"}," الإجمالي ",-1),yt={class:"w-1/2 text-center"},gt={class:"flex justify-center gap-4 mt-6 text-white"},Et=D({__name:"ViewCustomerOrders",setup(ht){const y=a=>a.reduce((l,e)=>l+e),g=B(),f=Number(g.params.customerId),{data:c}=E({queryKey:["orders",f],queryFn:()=>N(f)}),h=O(),v=F({mutationFn:I,onSuccess:()=>{R.replace({name:"orders"}),h.invalidateQueries({queryKey:["orders"]})},onError:a=>{console.log(a)}}),w=a=>{v.mutate(a)},C=a=>`إلغاء الطلبية ${a}# ?`,k=a=>{const l=new Date(a);if(!isNaN(l.getTime()))return l.toLocaleDateString()};return(a,l)=>(n(),i("div",null,[o(m,{to:{name:"view-customer",params:{customerId:s(f)}},variant:"outlined",color:"primary",size:"large","prepend-icon":s(j)},{default:r(()=>[_(" الرجوع الى عرض الزبون ")]),_:1},8,["to","prepend-icon"]),t("div",W,[t("h1",X,[_(" الطلبات "),s(c)&&s(c).length>0?(n(),i("span",Y,d(s(c).length),1)):p("",!0)]),Z]),s(c)?p("",!0):(n(),i("div",tt,[o(H)])),s(c)?(n(),i("div",et,[s(c).length===0?(n(),b(K,{key:0})):p("",!0),t("div",st,[(n(!0),i(T,null,q(s(c),e=>(n(),i("div",{key:e.id,class:"bg-white shadow-lg rounded-lg p-4"},[t("p",ot," #"+d(e.order_number),1),t("div",at,[rt,t("p",{class:A(["w-1/2 text-center font-medium",{"text-blue-600":e.status===s(u).PENDING,"text-yellow-600":e.status===s(u).SHIPPING,"text-purple-600":e.status===s(u).CONFIRMED,"text-red-600":e.status===s(u).CANCELD}])},d(s(S)(e.status)),3)]),t("div",nt,[ct,t("p",dt,d(k(e.created_at)),1)]),t("div",it,[lt,t("p",ut,d(y(e.quantity_selected)),1)]),t("div",mt,[_t,t("p",pt,d(e.shipping_address),1)]),ft,t("div",xt,[bt,t("p",yt,d(e.total_price),1)]),t("div",gt,[o(m,{rounded:"xl",variant:"elevated",color:"primary",type:"submit",to:{name:"view-customer-order",params:{customerId:s(f),orderId:e.id}}},{prepend:r(()=>[o(G)]),default:r(()=>[_(" عرض ")]),_:2},1032,["to"]),e.status!=s(u).CANCELD?(n(),b(J,{key:0,width:"500"},{activator:r(({props:x})=>[o(m,P(x,{rounded:"xl",variant:"elevated",color:"#004C6B",type:"submit"}),{prepend:r(()=>[o(z,{fill:"fill-white"})]),default:r(()=>[_(" إلغاء ")]),_:2},1040)]),default:r(({isActive:x})=>[o(M,{title:C(e.order_number),rounded:"lg",color:"#EFE9F5",style:{"padding-block":"1.75rem !important"}},{default:r(()=>[o($,null,{default:r(()=>[_(" سيتم الغاء هذه الطلبية بشكل نهائي، سيتلقى الزبون اشعارا يوضح ان الطلبية تم الغاؤها. ")]),_:1}),o(Q,null,{default:r(()=>[o(U),o(m,{text:"لا",onClick:V=>x.value=!1},null,8,["onClick"]),o(m,{text:"نعم",onClick:V=>{x.value=!1,w(e.id)}},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024)):p("",!0)])]))),128))])])):p("",!0)]))}});export{Et as default};
