import{d as I,I as F,N,u as R,b as q,e as T,bF as $,c as d,f as e,j as s,k as l,h as o,V as m,i as u,t as n,s as j,F as p,m as v,o as i,g as _,G as z,aR as Y,q as x,x as M,A as K,B as Q,C as U}from"./index-sE9P4Q9O.js";import{b as Z}from"./markets-service-9CeRDKxI.js";import{B as y}from"./base-status-k7rMfTbK.js";import{L as H}from"./LoadingProducts-Y6gSdiyC.js";import{d as O}from"./products-service-rn7XLkah.js";import{_ as G}from"./EmptyData.vue_vue_type_script_setup_true_lang-h7VAi8C4.js";import{V as X}from"./VSpacer-1dX4bruf.js";import{V as J}from"./VDialog-1Ku-f6d7.js";import"./queryString-AL1HqB06.js";import"./formData-AERYmAuJ.js";var W={VITE_API_URL:"https://makhazin.com.ly/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ee={class:"flex justify-end"},te={key:0,class:"w-full h-96 flex items-center justify-center"},se={key:1},oe={key:2,class:"shadow-md rounded-md p-6"},ae={class:"text-3xl"},re={class:"flex items-start gap-6"},ne={class:"w-48 shadow-md rounded-md p-4 mt-6 text-center"},de=e("p",{class:"font-medium mb-2"}," إسم مالك المحل ",-1),ie={class:"w-48 shadow-md rounded-md p-4 mt-6 text-center"},le=e("p",{class:"font-medium mb-2"}," رقم الهاتف ",-1),ce={class:"w-48 shadow-md rounded-md p-4 mt-6 text-center"},ue=e("p",{class:"font-medium mb-2"}," الحالة ",-1),me=e("div",{class:"lg:w-1/2"},[e("p",{class:"text-xl my-6"}," مكان المحل في الخريطة "),e("iframe",{class:"w- h-[25rem]",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3711.3809451652833!2d39.19203125090872!3d21.531954875714302!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x15c3cfd4906639d9%3A0x3885f685a367999f!2z2YXYudmH2K8g2LPZgdix2KfYoSDYp9mE2LnZhNmFINmE2YTYqtiv2LHZitio!5e0!3m2!1sen!2sly!4v1677401828377!5m2!1sen!2sly",width:"600",height:"450",style:{border:"0"},allowfullscreen:"true",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"})],-1),_e=e("div",{class:"h-[1px] w-1/2 bg-gray-300 mx-auto my-8"},null,-1),fe={class:"text-2xl"},pe={key:0},he={key:1,class:"mt-6 flex-grow flex flex-col justify-center"},ge={class:"grid grid-cols-productsCards gap-x-6 gap-y-8"},ve={class:"text-xl text-center"},xe=e("p",{class:"absolute top-0 left-0 bg-red-600 rounded-br-xl text-white px-3"}," 20% ",-1),ye={class:"absolute bottom-0 right-0 bg-gray-600 rounded-tl-xl text-white px-3 py-2"},we={class:"mt-4 flex items-center border-b border-gray-700 pb-1"},be=e("p",{class:"w-1/2"}," الوصف ",-1),ke={class:"w-1/2 text-center"},Ce={class:"mt-4 py-1 flex items-center border-b border-gray-700"},Ve={class:"w-1/5"},Se={class:"w-4/5 flex justify-end gap-1"},Pe={class:"mt-4 flex items-center border-b border-gray-700"},Ee=e("p",{class:"w-1/2"}," الكمية ",-1),Le={class:"w-1/2 text-center"},Ae={class:"mt-4 flex items-center border-b border-gray-700"},Be=e("p",{class:"w-1/2"}," الكمية الأدني للبيع ",-1),De={class:"w-1/2 text-center"},Ie={class:"flex justify-center gap-4 mt-6 text-white"},Ue=I({__name:"MarketDetails",setup(Fe){const w=F(),b=Number(w.params.id),h=N(()=>t.isPending.value||t.isRefetching.value),k=W.VITE_API_Storage,t=R({queryKey:["market"],queryFn:()=>Z(b)}),C=a=>a===y.Activated?"success":"error",V=a=>a===y.Activated?"مفعل":"غير مفعل",S=a=>({backgroundImage:`url(${k}/${a})`}),P=q(),E=T({mutationFn:O,onSuccess:()=>{P.invalidateQueries({queryKey:["products"]})},onError:a=>{console.log(a)}}),L=a=>{E.mutate(a)},A=a=>`حذف المنتج ${a}# ?`,B=()=>{t.refetch()};return(a,Ne)=>{var g;const D=$("DeleteIcon");return i(),d(p,null,[e("div",ee,[s(m,{to:{name:"markets-list"},variant:"outlined",color:"primary",size:"large","append-icon":o(z)},{default:l(()=>[_(" الرجوع الى المحلات ")]),_:1},8,["append-icon"])]),h.value?(i(),d("div",te,[s(Y,{size:"50",width:"4",indeterminate:"",color:"primary"})])):u("",!0),((g=o(t).data.value)==null?void 0:g.length)===0&&!h.value?(i(),d("div",se,[s(G,{onRefetch:B})])):u("",!0),o(t).data.value&&o(t).data.value.length>0?(i(),d("div",oe,[e("h1",ae,n(o(t).data.value[0].market_info.name),1),e("div",re,[e("div",ne,[de,e("p",null,n(o(t).data.value[0].market_info.owner_name),1)]),e("div",ie,[le,e("p",null,n(o(t).data.value[0].market_info.phone_number),1)]),e("div",ce,[ue,s(j,{color:C(o(t).data.value[0].market_info.active_market)},{default:l(()=>[_(n(V(o(t).data.value[0].market_info.active_market)),1)]),_:1},8,["color"])]),me]),_e,e("div",null,[e("p",fe," المنتجات التابعة ل"+n(o(t).data.value[0].market_info.name),1),o(t).data.value[0].product_info?u("",!0):(i(),d("div",pe,[s(H)])),o(t).data.value[0].product_info?(i(),d("div",he,[e("div",ge,[(i(!0),d(p,null,v(o(t).data.value,r=>(i(),d("div",{key:r.product_info.id,class:"bg-white shadow-lg rounded-lg p-4"},[e("p",ve,n(r.product_info.name),1),e("div",{class:"relative h-64 bg-cover bg-center mt-2",style:x(S(r.product_info.image1_path))},[xe,e("p",ye,n(r.product_info.price)+" دل ",1)],4),e("div",we,[be,e("p",ke,n(r.product_info.description),1)]),e("div",Ce,[e("p",Ve,n(r.product_info.hex_codes.length>1?"الألوان":"اللون"),1),e("div",Se,[(i(!0),d(p,null,v(r.product_info.hex_codes,(c,f)=>(i(),d("div",{key:f,class:"w-8 h-8 rounded-[50%] shadow-full-white border-2 flex items-end",style:x({"background-color":`#${c}`})},null,4))),128))])]),e("div",Pe,[Ee,e("p",Le,n(r.inventory),1)]),e("div",Ae,[Be,e("p",De,n(r.product_info.minimum_quantity),1)]),e("div",Ie,[s(J,{width:"500"},{activator:l(({props:c})=>[s(m,M(c,{rounded:"xl",variant:"elevated",color:"#004C6B",type:"submit"}),{prepend:l(()=>[s(D,{fill:"fill-white"})]),default:l(()=>[_(" إلغاء ")]),_:2},1040)]),default:l(({isActive:c})=>[s(K,{title:A(r.product_info.product_code),rounded:"lg",color:"#EFE9F5",style:{"padding-block":"1.75rem !important"}},{default:l(()=>[s(Q,null,{default:l(()=>[_(" سيتم حذف هذه المنتج بشكل نهائي . ")]),_:1}),s(U,null,{default:l(()=>[s(X),s(m,{text:"لا",onClick:f=>c.value=!1},null,8,["onClick"]),s(m,{text:"نعم",onClick:f=>{c.value=!1,L(r.product_info.id)}},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024)])]))),128))])])):u("",!0)])])):u("",!0)],64)}}});export{Ue as default};
