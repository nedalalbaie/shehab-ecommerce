import{S as x,g as N,c as S}from"./status-na5xpgos.js";import{d as D,I as E,u as T,b as A,e as F,c as i,j as o,k as r,h as s,V as u,f as e,g as m,t as d,i as _,l as b,F as I,m as L,a as y,o as n,aU as j,aP as $,x as q,B as O,C as Q,A as P}from"./index-sE9P4Q9O.js";import{_ as z}from"./DeleteIcon.vue_vue_type_script_setup_true_lang-1ZPx5IJG.js";import{V as K}from"./ViewIcon-cZLHY9MM.js";import{c as M}from"./check-status-1CD4zFK3.js";import{L as R}from"./LoadingOrders-rB5XNYPP.js";import{_ as U}from"./EmptyData.vue_vue_type_script_setup_true_lang-h7VAi8C4.js";import{V as G}from"./VSpacer-1dX4bruf.js";import{V as H}from"./VDialog-1Ku-f6d7.js";import"./queryString-AL1HqB06.js";const J={class:"flex items-center justify-between mt-6"},W={class:"text-3xl font-medium"},X={key:0,class:"bg-gray-200 px-2 rounded-lg text-2xl"},Y=y('<div class="flex gap-4"><button class="bg-sky-200 py-1 px-2 rounded-md"> قيد المعالجة </button><button class="bg-sky-200 py-1 px-2 rounded-md"> قيد التوصيل </button><button class="bg-sky-200 py-1 px-2 rounded-md"> تم التوصيل </button><button class="bg-sky-200 py-1 px-2 rounded-md"> ملغية </button></div>',1),Z={key:0},ee={key:1,class:"mt-6 flex-grow flex flex-col justify-center"},te={class:"grid grid-cols-productsCards gap-x-4 gap-y-8 mt-6"},se={class:"text-xl text-center"},oe={class:"mt-4 flex items-center border-b border-gray-700 pb-1"},re=e("p",{class:"w-1/2"}," الحالة ",-1),ae={class:"mt-4 flex items-center border-b border-gray-700"},ne=e("p",{class:"w-1/2"}," الزبون ",-1),ce={class:"w-1/2 text-center"},de={class:"mt-4 flex items-center border-b border-gray-700"},ie=e("p",{class:"w-1/2"}," التاريخ ",-1),le={class:"w-1/2 text-center"},ue=y('<div class="mt-4 flex items-center border-b border-gray-700"><p class="w-1/2"> عدد العناصر </p><p class="w-1/2 text-center"> 5 </p></div><div class="mt-4 flex items-center border-b border-gray-700"><p class="w-1/2"> العنوان </p><p class="w-1/2 text-center"> طرابلس </p></div>',2),me={class:"mt-4 flex items-center border-b border-gray-700"},_e=e("p",{class:"w-1/2"}," رقم الهاتف ",-1),pe={class:"w-1/2 text-center"},fe={class:"mt-4 flex items-center border-b border-gray-700"},xe=e("p",{class:"w-1/2"}," الإجمالي ",-1),ge={class:"w-1/2 text-center"},be={class:"flex justify-center gap-4 mt-6 text-white"},Ee=D({__name:"ViewCustomerBills",setup(ye){const h=E(),f=Number(h.params.customerId),{data:c}=T({queryKey:["customer-bills",f],queryFn:()=>N(f)}),v=A(),w=F({mutationFn:S,onSuccess:()=>{v.invalidateQueries({queryKey:["bills"]})},onError:a=>{console.log(a)}}),C=(a,l)=>{w.mutate({bill_number:a,status:l})},k=a=>`إلغاء الفاتورة ${a}# ?`,V=a=>{const l=new Date(a);if(!isNaN(l.getTime()))return l.toLocaleDateString()};return(a,l)=>{var g;return n(),i("div",null,[o(u,{to:{name:"view-customer",params:{customerId:s(f)}},variant:"outlined",color:"primary",size:"large","prepend-icon":s(j)},{default:r(()=>[m(" الرجوع الى عرض الزبون ")]),_:1},8,["to","prepend-icon"]),e("div",J,[e("h1",W,[m(" الفواتير "),s(c)&&s(c).length>0?(n(),i("span",X,d((g=s(c))==null?void 0:g.length),1)):_("",!0)]),Y]),s(c)?_("",!0):(n(),i("div",Z,[o(R)])),s(c)?(n(),i("div",ee,[s(c).length===0?(n(),b(U,{key:0})):_("",!0),e("div",te,[(n(!0),i(I,null,L(s(c),t=>(n(),i("div",{key:t.id,class:"bg-white shadow-lg rounded-lg p-4"},[e("p",se," #"+d(t.bill_number),1),e("div",oe,[re,e("p",{class:$(["w-1/2 text-center font-medium",{"text-green-600":t.status===s(x).ACCEPTED,"text-red-600":t.status===s(x).CANCELD}])},d(s(M)(t.status)),3)]),e("div",ae,[ne,e("p",ce,d(t.customer_name),1)]),e("div",de,[ie,e("p",le,d(V(t.created_at)),1)]),ue,e("div",me,[_e,e("p",pe,d(t.phone_number),1)]),e("div",fe,[xe,e("p",ge,d(t.total_price),1)]),e("div",be,[o(u,{rounded:"xl",variant:"elevated",color:"primary",type:"submit",to:{name:"view-bill",params:{id:t.id}}},{prepend:r(()=>[o(K)]),default:r(()=>[m(" عرض ")]),_:2},1032,["to"]),t.status!=s(x).CANCELD?(n(),b(H,{key:0,width:"500"},{activator:r(({props:p})=>[o(u,q(p,{rounded:"xl",variant:"elevated",color:"#004C6B",type:"submit"}),{prepend:r(()=>[o(z,{fill:"fill-white"})]),default:r(()=>[m(" إلغاء ")]),_:2},1040)]),default:r(({isActive:p})=>[o(P,{title:k(t.bill_number),rounded:"lg",color:"#EFE9F5",style:{"padding-block":"1.75rem !important"}},{default:r(()=>[o(O,null,{default:r(()=>[m(" سيتم الغاء هذه الفاتورة بشكل نهائي، سيتلقى الزبون اشعارا يوضح ان الفاتورة تم الغاؤها. ")]),_:1}),o(Q,null,{default:r(()=>[o(G),o(u,{text:"لا",onClick:B=>p.value=!1},null,8,["onClick"]),o(u,{text:"نعم",onClick:B=>{p.value=!1,C(t.bill_number,"canceled")}},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024)):_("",!0)])]))),128))])])):_("",!0)])}}});export{Ee as default};
