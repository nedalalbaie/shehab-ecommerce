import{d as w,r as f,u as B,b as D,e as F,c as v,f as n,j as e,h as i,aI as P,k as t,V as u,l as S,i as g,F as T,o as c,g as p,p as q,x as E,A as N,B as Q,C as I}from"./index-sE9P4Q9O.js";import{g as L,d as $}from"./discounts-service-8_GhC-Cv.js";import{d as j}from"./index-AJYIkLwR.js";import{V as K,L as M}from"./VDataTableServer-KxNtiX_H.js";import{_ as U}from"./DeleteIcon.vue_vue_type_script_setup_true_lang-1ZPx5IJG.js";import{V as z}from"./VDialog-1Ku-f6d7.js";import{V as A}from"./VSpacer-1dX4bruf.js";import"./queryString-AL1HqB06.js";import"./_commonjsHelpers-5-cIlDoe.js";import"./filter-ySkqEX_B.js";const O=n("h2",{class:"text-2xl font-semibold"}," التخفيضات ",-1),G={class:"flex justify-between mt-8"},H={class:"w-72"},J={key:1},R={class:"shadow-lg rounded-lg mt-4 border border-gray-200"},W={class:"flex gap-2"},re=w({__name:"DiscountsList",setup(X){const m=f(""),o=f({page:1,limit:10}),r=B({queryKey:["discounts",o],queryFn:()=>L(o.value)}),_=[{title:"الكود",value:"code",width:"300px",sortable:!1},{title:"نوع التخفيض",value:"discount_type",width:"300px",sortable:!1},{title:"نسبة التخفيض",value:"amount",width:"300px",sortable:!1},{title:"تاريخ بداية التخفيض",value:"start_date",width:"300px",sortable:!1},{title:"تاريخ إنتهاء الصلاحية",value:"end_date",width:"300px",sortable:!1},{title:"الإجرائات",key:"actions",width:"300px",sortable:!1}],h=({page:a,limit:l})=>{o.value={...o.value,page:a??1,limit:l??10}},y=j(()=>{},300),V=D(),x=F({mutationFn:$,onSuccess:()=>{V.invalidateQueries({queryKey:["discounts"]})},onError:a=>{console.log(a)}}),b=a=>{x.mutate(a)},C=a=>`حذف التخفيض ${a}# ?`;return(a,l)=>(c(),v(T,null,[O,n("div",G,[n("div",H,[e(P,{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=s=>m.value=s),label:"البحث",variant:"outlined",color:"primary",clearable:"",placeholder:"البحث",density:"compact",onInput:i(y)},null,8,["modelValue","onInput"])]),e(u,{"append-icon":i(q),to:{name:"add-discount"},color:"primary",variant:"elevated"},{default:t(()=>[p(" إضافة تخفيض ")]),_:1},8,["append-icon"])]),i(r).isPending.value?(c(),S(M,{key:0})):g("",!0),i(r).data.value?(c(),v("div",J,[n("div",R,[e(K,{sticky:"","items-per-page":o.value.limit,page:o.value.page,headers:_,"items-length":i(r).data.value.length,items:i(r).data.value,"onUpdate:options":l[1]||(l[1]=s=>h({page:s.page,limit:s.itemsPerPage}))},{"item.actions":t(({item:s})=>[n("div",W,[e(z,{width:"500"},{activator:t(({props:d})=>[e(u,E(d,{size:"small",variant:"elevated",color:"#004C6B",type:"submit"}),{prepend:t(()=>[e(U,{fill:"fill-white"})]),default:t(()=>[p(" حذف ")]),_:2},1040)]),default:t(({isActive:d})=>[e(N,{title:C(s.code),rounded:"lg",color:"#EFE9F5",style:{"padding-block":"1.75rem !important"}},{default:t(()=>[e(Q,null,{default:t(()=>[p(" سيتم حذف هذه التخفيض بشكل نهائي . ")]),_:1}),e(I,null,{default:t(()=>[e(A),e(u,{text:"لا",onClick:k=>d.value=!1},null,8,["onClick"]),e(u,{text:"نعم",onClick:k=>{d.value=!1,b(s.id)}},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024)])]),_:2},1032,["items-per-page","page","items-length","items"])])])):g("",!0)],64))}});export{re as default};
