import{d as h,aA as C,aB as j,aD as g,aE as k,aF as v,c as x,f as r,j as l,h as e,aH as b,aI as V,k as w,V as F,aJ as E,o as S,g as I,b as L,e as M,F as U,G as $,H as q}from"./index-sE9P4Q9O.js";import{V as z}from"./VSwitch-HExrUjhz.js";import{p as A}from"./installment-service-QRNfZonm.js";import"./queryString-AL1HqB06.js";import"./formData-AERYmAuJ.js";const D={class:"grid md:grid-cols-2 xl:grid-cols-3 gap-x-8 gap-y-2 mt-6"},H={class:"mt-3"},P=h({__name:"InstallemntForm",props:{isLoading:{type:Boolean}},emits:["submit"],setup(y,{emit:m}){const i=y,d=m,s=C(j({days_late:g().min(1,"يجب إدخال الأيام المطلوبة"),percentage:g().min(1,"يجب إدخال النسبة"),show:g()})),{handleSubmit:f,errors:c,meta:N}=k({validationSchema:s,initialValues:{show:1}}),{value:o}=v("days_late"),{value:n}=v("percentage"),{value:u}=v("show"),T=()=>{o.value=Number(o.value)},B=()=>{n.value=Number(n.value)},_=f(p=>{console.log(p),d("submit",p)});return(p,a)=>(S(),x("form",{onSubmit:a[3]||(a[3]=E((...t)=>e(_)&&e(_)(...t),["prevent"]))},[r("div",D,[l(V,{modelValue:e(o),"onUpdate:modelValue":a[0]||(a[0]=t=>b(o)?o.value=t:null),label:"الأيام المتبقية",type:"number",variant:"outlined",color:"primary",placeholder:"الأيام المتبقية","error-messages":e(c).days_late,onInput:T},null,8,["modelValue","error-messages"]),l(V,{modelValue:e(n),"onUpdate:modelValue":a[1]||(a[1]=t=>b(n)?n.value=t:null),label:"النسبة",type:"number",variant:"outlined",color:"primary",placeholder:"النسبة","error-messages":e(c).percentage,onInput:B},null,8,["modelValue","error-messages"])]),r("div",null,[l(z,{modelValue:e(u),"onUpdate:modelValue":a[2]||(a[2]=t=>b(u)?u.value=t:null),"true-value":1,"false-value":0,inset:"","center-affix":!0,color:"primary",label:e(u)?"إخفاء":"عرض","error-messages":e(c).show},null,8,["modelValue","label","error-messages"])]),r("div",H,[l(F,{disabled:!e(N).valid,size:"large",variant:"elevated",color:"primary",type:"submit",loading:i.isLoading},{default:w(()=>[I(" إضافة ")]),_:1},8,["disabled","loading"])])],32))}}),Q={class:"flex justify-between"},G=r("h1",{class:"text-2xl font-medium"}," إضافة قسط جديد ",-1),X=h({__name:"CreateInstallment",setup(y){const m=L(),i=M({mutationFn:A,onSuccess:()=>{m.invalidateQueries({queryKey:["installments"]}),q.replace({name:"installments"})},onError:s=>{console.log(s)}}),d=s=>{i.mutate(s)};return(s,f)=>(S(),x(U,null,[r("div",Q,[G,l(F,{to:{name:"installments"},variant:"outlined",color:"primary",size:"large","append-icon":e($)},{default:w(()=>[I(" الرجوع الى الأقساط ")]),_:1},8,["append-icon"])]),l(P,{"is-loading":e(i).isPending.value,onSubmit:d},null,8,["is-loading"])],64))}});export{X as default};
