import{d as P,c,a as Q,o as r,r as y,u as U,b as G,e as K,f as e,g as n,h as o,t as d,i as h,w as O,v as H,j as a,k as s,V as u,l as k,F as L,m as D,n as J,p as W,q as M,s as X,x as Y,y as C,z as Z,A as ee,B as te,C as ae,D as oe,E as se}from"./index-sE9P4Q9O.js";import{g as le,c as re,d as ne}from"./products-service-rn7XLkah.js";import{_ as ce}from"./SearchIcon.vue_vue_type_script_setup_true_lang-oMhmWv5l.js";import{_ as ie}from"./EmptyData.vue_vue_type_script_setup_true_lang-h7VAi8C4.js";import{L as de}from"./LoadingProducts-Y6gSdiyC.js";import{d as ue}from"./index-AJYIkLwR.js";import{B as g}from"./base-status-k7rMfTbK.js";import{V}from"./VTooltip-RkjaeBLA.js";import{V as _e}from"./VSpacer-1dX4bruf.js";import{V as pe}from"./VDialog-1Ku-f6d7.js";import"./queryString-AL1HqB06.js";import"./formData-AERYmAuJ.js";import"./_commonjsHelpers-5-cIlDoe.js";const me=["stroke"],he=Q('<g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="28.672000000000004"></g><g id="SVGRepo_iconCarrier"><path d="M361.45 1023.91c-14.34 0-28.682-5.454-39.586-16.358L16.458 702.148c-21.84-21.84-21.84-57.348-0.016-79.172l441.16-441.158c20.48-20.48 59.956-31.526 88.092-24.636l206.536 50.646c24.588 6.062 49.332 27.854 60.19 53.004a7.998 7.998 0 0 1-4.17 10.514c-4.032 1.75-8.78-0.11-10.514-4.17-8.716-20.2-29.932-39.024-49.318-43.804L541.88 172.726c-22.886-5.624-56.3 3.75-72.968 20.402L27.754 634.288c-7.516 7.514-11.638 17.542-11.638 28.26 0 10.732 4.138 20.762 11.654 28.292l305.404 305.404c15.592 15.576 40.976 15.576 56.566-0.016l441.126-441.142c16.67-16.668 25.994-50.098 20.386-72.984l-37.336-152.266a8 8 0 0 1 5.858-9.686 8.008 8.008 0 0 1 9.672 5.876l37.336 152.264c7.014 28.588-3.796 67.298-24.606 88.106L401.05 1007.552c-10.92 10.906-25.274 16.358-39.6 16.358z" fill=""></path><path d="M663.934 423.986c-16.386 0-32.76-6.232-45.224-18.7-24.964-24.962-24.964-65.564-0.016-90.512 21.95-21.95 56.348-25.026 81.764-7.28a65.05 65.05 0 0 1 8.748 7.234 7.994 7.994 0 0 1 0.062 11.31c-3.11 3.138-8.17 3.186-11.308 0.078a48.916 48.916 0 0 0-6.61-5.468c-19.074-13.31-44.866-11.028-61.348 5.438-18.714 18.714-18.7 49.162 0.016 67.892 18.716 18.7 49.164 18.714 67.91-0.032 5.638-5.686 9.824-12.7 12.058-20.262 1.25-4.234 5.75-6.67 9.936-5.39a8 8 0 0 1 5.404 9.936c-2.982 10.092-8.542 19.418-16.074 27.01-12.496 12.498-28.916 18.746-45.318 18.746z" fill=""></path><path d="M663.824 392.026c-8.466 0-16.464-3.312-22.494-9.342a31.76 31.76 0 0 1-9.376-22.666c0.016-17.636 14.374-31.978 31.994-31.978 4.42 0 7.998 3.578 7.998 7.998s-3.578 8-7.998 8c-8.81 0-15.98 7.17-15.996 15.996a15.768 15.768 0 0 0 4.686 11.326 15.768 15.768 0 0 0 11.248 4.67h0.078a15.952 15.952 0 0 0 11.874-5.326 8 8 0 0 1 11.902 10.684 31.922 31.922 0 0 1-23.728 10.638h-0.188z" fill=""></path><path d="M663.95 368.03a8.002 8.002 0 0 1-7.81-6.31 8.024 8.024 0 0 1 6.138-9.514c281.864-60.692 345.6-302.204 345.6-344.116 0-4.42 3.578-8 8-8a7.994 7.994 0 0 1 7.998 8c0 43.914-66.064 296.844-358.222 359.752a8.1 8.1 0 0 1-1.704 0.188z" fill=""></path><path d="M738.856 192.05a7.944 7.944 0 0 1-4.592-1.454 7.99 7.99 0 0 1-1.954-11.138C836.024 31.24 989.85 0.09 1015.908 0.09h0.016c4.42 0 7.998 3.578 7.998 8s-3.578 7.998-7.998 7.998h-0.016c-23.292 0-171.98 31.774-270.508 172.542a7.934 7.934 0 0 1-6.544 3.42zM312.1 607.95c-39.694-0.016-71.984-32.322-71.984-71.986 0-39.694 32.292-71.984 71.984-72 39.696 0.016 71.986 32.306 71.986 71.984s-32.292 71.986-71.986 72.002z m0-127.992c-30.868 0.016-55.988 25.136-55.988 56.004 0 30.854 25.122 55.974 55.988 55.99 30.87-0.016 55.99-25.136 55.99-56.006 0-30.866-25.122-55.972-55.99-55.988zM488.064 783.912c-39.696-0.016-71.986-32.322-71.986-71.984 0-39.696 32.292-71.986 71.986-72.002 39.696 0.016 71.984 32.306 71.984 72.002 0 39.662-32.288 71.968-71.984 71.984z m0-127.99c-30.87 0.016-55.988 25.136-55.988 56.006 0 30.854 25.12 55.972 55.988 55.988 30.868-0.016 55.988-25.134 55.988-55.988 0-30.87-25.12-55.99-55.988-56.006zM248.114 783.912a7.996 7.996 0 0 1-5.654-13.654l303.938-303.952a7.996 7.996 0 1 1 11.308 11.31L253.77 781.568a7.976 7.976 0 0 1-5.656 2.344z" fill=""></path></g>',3),ge=[he],fe=P({__name:"DiscountIcon",props:{color:{}},setup(B){return(_,v)=>(r(),c("svg",{width:"256px",height:"100%",viewBox:"-81.92 -81.92 1187.84 1187.84",fill:"#000000",class:"icon",version:"1.1",xmlns:"http://www.w3.org/2000/svg",stroke:_.color??"white","stroke-width":"36.864"},ge,8,me))}});var ve={VITE_API_URL:"https://makhazin.com.ly/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const xe={class:"min-h-[calc(100vh-80px)] flex flex-col"},ye={class:"text-3xl font-medium"},be={key:0,class:"bg-gray-200 px-2 rounded-lg text-2xl"},we={class:"flex gap-4"},ke={class:"flex justify-between items-center bg-[#ebf2fc] border rounded-xl py-1 px-4"},Ce={key:0},Ve={key:1,class:"mt-6 flex-grow flex flex-col justify-center"},Se={class:"grid grid-cols-productsCards gap-x-6 gap-y-8"},ze={class:"text-xl text-center"},$e=e("p",{class:"absolute top-0 left-0 bg-red-600 rounded-br-xl text-white px-3"}," 20% ",-1),Ee={class:"absolute bottom-0 right-0 bg-gray-600 rounded-tl-xl text-white px-3 py-2"},Le={class:"mt-4 flex items-center border-b border-gray-700 pb-1"},De=e("p",{class:"w-1/2"}," الوصف ",-1),Me={class:"w-1/2 text-center"},Pe={class:"mt-4 flex items-center border-b border-gray-700"},Be=e("p",{class:"w-1/2"}," طريقة البيع ",-1),Ae={class:"w-1/2 text-center"},Ie={class:"mt-4 flex items-center border-b border-gray-700"},Te=e("p",{class:"w-1/2"}," القيمة الأدني ",-1),je={class:"w-1/2 text-center"},qe={class:"mt-4 py-1 flex items-center border-b border-gray-700"},Ne={class:"w-1/5"},Re={class:"w-4/5 flex justify-end gap-1"},Fe={class:"mt-4 py-1 flex items-center border-b border-gray-700"},Qe=e("p",{class:"w-1/2"}," الحالة ",-1),Ue={class:"w-1/2 text-center"},Ge={class:"flex justify-center gap-1 mt-6 text-white"},lt=P({__name:"productsList",setup(B){const _=y([]),v=y(""),b=y({page:1,limit:10,productName:void 0}),p=U({queryKey:["products",b],queryFn:()=>le(b.value)}),A=ve.VITE_API_Storage,I=y(null),T=l=>({backgroundImage:`url(${A}/${l})`}),S=G(),j=K({mutationFn:ne,onSuccess:()=>{S.invalidateQueries({queryKey:["products"]})},onError:l=>{console.log(l)}}),q=l=>{j.mutate(l)},N=l=>`حذف المنتج ${l}# ؟`,z=ue(()=>{b.value.productName=v.value},300),$=(l,m,f)=>{_.value[f]=!0,re({id:l,active_product:m}).then(()=>S.invalidateQueries({queryKey:["products"]})).finally(()=>_.value[f]=!1)},R=l=>l===g.Activated?"success":"error",F=l=>l===g.Activated?"مفعل":"غير مفعل";return(l,m)=>{var f,E;return r(),c("div",xe,[e("h1",ye,[n(" المنتجات "),((f=o(p).data.value)==null?void 0:f.data.length)>0?(r(),c("span",be,d((E=o(p).data.value)==null?void 0:E.data.length),1)):h("",!0)]),e("div",{ref_key:"upperElement",ref:I,class:"flex justify-between items-center mt-6"},[e("div",we,[e("div",ke,[O(e("input",{"onUpdate:modelValue":m[0]||(m[0]=t=>v.value=t),placeholder:"إبحث عن منتجات",type:"text",class:"w-56 border-none p-2 rounded-lg outline-none transition-all duration-100 placeholder:text-gray-700",onInput:m[1]||(m[1]=(...t)=>o(z)&&o(z)(...t))},null,544),[[H,v.value]]),a(ce,{"custom-style":"w-6 h-6"})]),a(u,{"append-icon":fe,to:{name:"coupons"},color:"primary",size:"large",rounded:"xl",variant:"elevated"},{default:s(()=>[n(" التخفيضات ")]),_:1}),a(u,{"append-icon":o(J),to:{name:"discounts"},color:"primary",size:"large",rounded:"xl",variant:"elevated"},{default:s(()=>[n(" الكوبونات ")]),_:1},8,["append-icon"])]),a(u,{"append-icon":o(W),to:{name:"add-product"},color:"primary",size:"large",rounded:"xl",variant:"elevated"},{default:s(()=>[n(" إضافة منتج ")]),_:1},8,["append-icon"])],512),o(p).data.value?h("",!0):(r(),c("div",Ce,[a(de)])),o(p).data.value?(r(),c("div",Ve,[o(p).data.value.data.length===0?(r(),k(ie,{key:0})):h("",!0),e("div",Se,[(r(!0),c(L,null,D(o(p).data.value.data,(t,x)=>(r(),c("div",{key:t.id,class:"bg-white shadow-lg rounded-lg p-4"},[e("p",ze,d(t.name),1),e("div",{class:"relative h-64 bg-cover bg-center mt-2",style:M(T(t.image1_path))},[$e,e("p",Ee,d(t.price)+" دل ",1)],4),e("div",Le,[De,e("p",Me,d(t.description),1)]),e("div",Pe,[Be,e("p",Ae,d(t.selling_method=="package"?"بالحزمة":"بالقطعة الواحدة"),1)]),e("div",Ie,[Te,e("p",je,d(t.minimum_quantity),1)]),e("div",qe,[e("p",Ne,d(t.hex_codes.length>1?"الألوان":"اللون"),1),e("div",Re,[(r(!0),c(L,null,D(t.hex_codes,(i,w)=>(r(),c("div",{key:w,class:"w-8 h-8 rounded-[50%] shadow-full-white border-2 flex items-end",style:M({"background-color":`#${i}`})},null,4))),128))])]),e("div",Fe,[Qe,e("p",Ue,[a(X,{size:"large",color:R(t.active_product)},{default:s(()=>[n(d(F(t.active_product)),1)]),_:2},1032,["color"])])]),e("div",Ge,[a(pe,{width:"500"},{activator:s(({props:i})=>[a(u,Y(i,{variant:"text",class:"mx-1",density:"comfortable",icon:"",color:"error"}),{default:s(()=>[a(C,{icon:o(Z)},null,8,["icon"]),a(V,{activator:"parent",location:"bottom"},{default:s(()=>[n(" حذف ")]),_:1})]),_:2},1040)]),default:s(({isActive:i})=>[a(ee,{title:N(t.product_code),rounded:"lg",color:"#EFE9F5",style:{"padding-block":"1.75rem !important"}},{default:s(()=>[a(te,null,{default:s(()=>[n(" سيتم حذف هذه المنتج بشكل نهائي . ")]),_:1}),a(ae,null,{default:s(()=>[a(_e),a(u,{text:"لا",onClick:w=>i.value=!1},null,8,["onClick"]),a(u,{text:"نعم",onClick:w=>{i.value=!1,q(t.id)}},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024),t.active_product===o(g).Activated?(r(),k(u,{key:0,loading:_.value[x],variant:"tonal",class:"mx-1",density:"comfortable",icon:"",color:"warning",onClick:i=>$(t.id,o(g).Deactivated,x)},{default:s(()=>[a(C,{icon:o(oe)},null,8,["icon"]),a(V,{activator:"parent",location:"bottom"},{default:s(()=>[n(" الغاء التفعيل ")]),_:1})]),_:2},1032,["loading","onClick"])):h("",!0),t.active_product===o(g).Deactivated?(r(),k(u,{key:1,loading:_.value[x],variant:"tonal",class:"mx-1",density:"comfortable",icon:"",color:"success",onClick:i=>$(t.id,o(g).Activated,x)},{default:s(()=>[a(C,{icon:o(se)},null,8,["icon"]),a(V,{activator:"parent",location:"bottom"},{default:s(()=>[n(" إعادة التفعيل ")]),_:1})]),_:2},1032,["loading","onClick"])):h("",!0)])]))),128))])])):h("",!0)])}}});export{lt as default};
