import{d as A,r as m,aG as E,o as b,c as V,f as s,j as d,i as C,N as F,aA as H,aB as M,aC as z,aZ as G,a_ as B,a$ as S,aE as J,aF as _,h as l,aH as y,aI as O,t as $,k as R,V as Z,aJ as q,g as K}from"./index-sE9P4Q9O.js";import{U as Q,_ as W,t as X,p as Y}from"./pathToFile-cjpw7gPR.js";import{b as D,c as P}from"./format-date-q9jp0Fy1.js";import{V as N}from"./VDatePicker-LLTWplpV.js";import{V as ee}from"./VSwitch-HExrUjhz.js";const ae={key:1,class:"relative rounded-lg"},te=["src"],le=s("p",{class:"bg-gray-600 bg-opacity-75 border-2 border-gray-600 py-1 px-3 text-white hover:-translate-y-1 transition-all delay-150 cursor-pointer"}," انقر لتغيير الصورة ",-1),se=[le],oe=A({__name:"AdImageUpload",props:{imagePath:{}},emits:["handleImage"],setup(w,{emit:x}){const e=w,k=x,i=m(null),o=m(!1),n=m(""),v=m(null),I=c=>{var h;o.value=!0;const u=(h=c.target.files)==null?void 0:h[0];u&&X(u).then(p=>{o.value=!1,n.value=p,v.value=u,k("handleImage",v.value,"filled")})},f=()=>{i.value.click()};return E(()=>{e.imagePath&&(n.value=e.imagePath)}),(c,u)=>(b(),V("div",null,[s("input",{ref_key:"fileUpload",ref:i,class:"hidden",type:"file",accept:"image/*",onChange:I},null,544),!n.value&&!o.value?(b(),V("div",{key:0,class:"flex justify-center items-center bg-white rounded-lg h-64 border-2 border-slate-200 shadow-md hover:-translate-y-2 transition-all delay-100 cursor-pointer",onClick:f},[d(Q)])):C("",!0),n.value&&!o.value?(b(),V("div",ae,[s("img",{class:"rounded-lg border-4 border-gray-200 w-full object-cover object-center shadow-md",src:n.value,alt:"uploaded image"},null,8,te),s("div",{class:"absolute top-0 left-0 h-full w-full flex justify-center items-center",onClick:f},se)])):C("",!0),d(W,{"is-loading":o.value,"custom-style":"animate-spin m-auto h-8 w-8 text-gray-400"},null,8,["is-loading"])]))}}),re={class:"grid gap-x-8 gap-y-2 mt-6"},de={class:"flex gap-14 mt-10"},ne={class:"mt-4"},ie={class:"mt-8 lg:w-1/4"},ue={class:"mt-6"},fe=A({__name:"AdsForm",props:{isLoading:{type:Boolean},ad:{}},emits:["submit"],setup(w,{emit:x}){const e=w,k=x,i=m("empty"),o=m(),n=F(()=>!!e.ad),v=F(()=>!u.value.valid||i.value=="empty"),I=H(M({name:z().min(1,"يجب إدخال  إسم الإعلان "),show:G([B(0),B(1)]),start_date:S(),end_date:S()})),{handleSubmit:f,errors:c,meta:u,setValues:h}=J({validationSchema:I,initialValues:{show:0}}),{value:p}=_("name"),{value:g}=_("show"),{value:T}=_("start_date"),{value:U}=_("end_date");E(()=>{e.ad&&(h({...e.ad,start_date:P(e.ad.start_date),end_date:P(e.ad.end_date)}),i.value=e.ad.url?"filled":"empty",Y(e.ad.url,e.ad.url.substring(e.ad.url.lastIndexOf("/")+1)).then(t=>{o.value=t}).catch(t=>{console.error(t)}))});const j=f(t=>{k("submit",{...t,url:o.value,start_date:D(t.start_date),end_date:D(t.end_date)})}),L=(t,a)=>{o.value=t,i.value=a};return(t,a)=>(b(),V("form",{onSubmit:a[4]||(a[4]=q((...r)=>l(j)&&l(j)(...r),["prevent"]))},[s("div",re,[d(O,{modelValue:l(p),"onUpdate:modelValue":a[0]||(a[0]=r=>y(p)?p.value=r:null),class:"lg:w-1/2",label:"الإسم",variant:"outlined",color:"primary",placeholder:"الإسم","error-messages":l(c).name},null,8,["modelValue","error-messages"])]),s("div",de,[d(N,{modelValue:l(T),"onUpdate:modelValue":a[1]||(a[1]=r=>y(T)?T.value=r:null),color:"primary",header:"تاريخ بداية الإعلان",border:!0,title:"","show-adjacent-months":""},null,8,["modelValue"]),d(N,{modelValue:l(U),"onUpdate:modelValue":a[2]||(a[2]=r=>y(U)?U.value=r:null),color:"primary",header:"تاريخ إنتهاء الإعلان",border:!0,title:"","show-adjacent-months":"",height:"550px"},null,8,["modelValue"])]),s("div",ne,[d(ee,{modelValue:l(g),"onUpdate:modelValue":a[3]||(a[3]=r=>y(g)?g.value=r:null),"true-value":1,inset:"","center-affix":!0,color:"primary",label:l(g)?"تعطيل":"تفعيل","error-messages":l(c).show},null,8,["modelValue","label","error-messages"]),s("p",null,$(l(g)?" الإعلان مفعل حالياً وسيظهر للمستخدمين":"الإعلان غير مفعل حاليا"),1)]),s("div",ie,[d(oe,{onHandleImage:L})]),s("div",ue,[d(Z,{disabled:v.value,size:"large",variant:"elevated",color:"primary",type:"submit",loading:e.isLoading},{default:R(()=>[K($(n.value?"تعديل ":"حفظ"),1)]),_:1},8,["disabled","loading"])])],32))}});export{fe as _};
