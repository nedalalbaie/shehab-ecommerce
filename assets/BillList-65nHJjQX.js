import{S as _,a as E,c as D}from"./status-na5xpgos.js";import{aY as S,o as n,c as l,f as t,d as N,r as T,u as L,b as A,e as F,g as f,h as a,t as c,i as u,j as o,l as y,F as q,m as j,aP as P,k as r,V as h,x as O,B as Q,C as K,A as M}from"./index-sE9P4Q9O.js";import{_ as z}from"./DeleteIcon.vue_vue_type_script_setup_true_lang-1ZPx5IJG.js";import{V as I}from"./ViewIcon-cZLHY9MM.js";import{L as U}from"./LoadingOrders-rB5XNYPP.js";import{_ as Y}from"./EmptyData.vue_vue_type_script_setup_true_lang-h7VAi8C4.js";import{V as G}from"./VSpacer-1dX4bruf.js";import{V as H}from"./VDialog-1Ku-f6d7.js";import"./queryString-AL1HqB06.js";const J={},R={class:"flex gap-4"},W=t("button",{class:"bg-sky-200 py-1 px-2 rounded-md"}," قيد المعالجة ",-1),X=t("button",{class:"bg-sky-200 py-1 px-2 rounded-md"}," قيد التوصيل ",-1),Z=t("button",{class:"bg-sky-200 py-1 px-2 rounded-md"}," تم التوصيل ",-1),tt=t("button",{class:"bg-sky-200 py-1 px-2 rounded-md"}," ملغية ",-1),et=[W,X,Z,tt];function st(g,x){return n(),l("div",R,et)}const ot=S(J,[["render",st]]),at={class:"flex items-center justify-between mt-6"},rt={class:"text-3xl font-medium"},nt={key:0,class:"bg-gray-200 px-2 rounded-lg text-2xl"},ct={key:0},dt={key:1,class:"mt-6 flex-grow flex flex-col justify-center"},it={class:"grid grid-cols-productsCards gap-x-4 gap-y-8 mt-6"},lt={class:"text-xl text-center"},_t={class:"mt-4 flex items-center border-b border-gray-700 pb-1"},ut=t("p",{class:"w-1/2"}," الحالة ",-1),mt={class:"mt-4 flex items-center border-b border-gray-700"},pt=t("p",{class:"w-1/2"}," الزبون ",-1),ft={class:"w-1/2 text-center"},ht={class:"mt-4 flex items-center border-b border-gray-700"},xt=t("p",{class:"w-1/2"}," التاريخ ",-1),yt={class:"w-1/2 text-center"},gt={class:"mt-4 flex items-center border-b border-gray-700"},bt=t("p",{class:"w-1/2"}," عدد العناصر ",-1),Ct={class:"w-1/2 text-center"},vt={class:"mt-4 flex items-center border-b border-gray-700"},wt=t("p",{class:"w-1/2"}," رقم الهاتف ",-1),kt={class:"w-1/2 text-center"},Vt={class:"mt-4 flex items-center border-b border-gray-700"},$t=t("p",{class:"w-1/2"}," الإجمالي ",-1),Bt={class:"w-1/2 text-center"},Et={class:"flex justify-center gap-4 mt-6 text-white"},Pt=N({__name:"BillList",setup(g){const x=T({page:1,limit:10}),{data:d}=L({queryKey:["bills",x],queryFn:()=>E(x.value)}),b=A(),C=F({mutationFn:D,onSuccess:()=>{b.invalidateQueries({queryKey:["bills"]})},onError:s=>{console.log(s)}}),v=(s,i)=>{C.mutate({bill_number:s,status:i})},w=s=>`إلغاء الفاتورة ${s}# ?`,k=s=>{const i=new Date(s);if(!isNaN(i.getTime()))return i.toLocaleDateString()},V=s=>{switch(s){case _.CANCELD:return"ملغية";case _.ACCEPTED:return"تم التوصيل";default:return"تم التوصيل"}},$=s=>s.reduce((i,m)=>i+m);return(s,i)=>{var m;return n(),l("div",null,[t("div",at,[t("h1",rt,[f(" الفواتير "),a(d)&&a(d).total>0?(n(),l("span",nt,c((m=a(d))==null?void 0:m.total),1)):u("",!0)]),o(ot)]),a(d)?u("",!0):(n(),l("div",ct,[o(U)])),a(d)?(n(),l("div",dt,[a(d).total===0?(n(),y(Y,{key:0})):u("",!0),t("div",it,[(n(!0),l(q,null,j(a(d).data,e=>(n(),l("div",{key:e.id,class:"bg-white shadow-lg rounded-lg p-4"},[t("p",lt,c(e.bill_number),1),t("div",_t,[ut,t("p",{class:P(["w-1/2 text-center font-medium",{"text-green-600":e.status===a(_).ACCEPTED,"text-red-600":e.status===a(_).CANCELD}])},c(V(e.status)),3)]),t("div",mt,[pt,t("p",ft,c(e.customer_name),1)]),t("div",ht,[xt,t("p",yt,c(k(e.created_at)),1)]),t("div",gt,[bt,t("p",Ct,c($(e.quantity)),1)]),t("div",vt,[wt,t("p",kt,c(e.phone_number),1)]),t("div",Vt,[$t,t("p",Bt,c(e.total_price),1)]),t("div",Et,[o(h,{rounded:"xl",variant:"elevated",color:"primary",type:"submit",to:{name:"view-bill",params:{id:e.id}}},{prepend:r(()=>[o(I)]),default:r(()=>[f(" عرض ")]),_:2},1032,["to"]),e.status!=a(_).CANCELD?(n(),y(H,{key:0,width:"500"},{activator:r(({props:p})=>[o(h,O(p,{rounded:"xl",variant:"elevated",color:"#004C6B",type:"submit"}),{prepend:r(()=>[o(z,{fill:"fill-white"})]),default:r(()=>[f(" إلغاء ")]),_:2},1040)]),default:r(({isActive:p})=>[o(M,{title:w(e.bill_number),rounded:"lg",color:"#EFE9F5",style:{"padding-block":"1.75rem !important"}},{default:r(()=>[o(Q,null,{default:r(()=>[f(" سيتم الغاء هذه الفاتورة بشكل نهائي، سيتلقى الزبون اشعارا يوضح ان الفاتورة تم الغاؤها. ")]),_:1}),o(K,null,{default:r(()=>[o(G),o(h,{text:"لا",onClick:B=>p.value=!1},null,8,["onClick"]),o(h,{text:"نعم",onClick:B=>{p.value=!1,v(e.bill_number,"canceled")}},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024)):u("",!0)])]))),128))])])):u("",!0)])}}});export{Pt as default};
